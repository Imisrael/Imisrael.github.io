<!DOCTYPE html>
<html>
  <head>
    <title>Documentation for Hugo docDock</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.48" />
<title>Data Modeling Using GridDB :: Documentation for Hugo docDock</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/style-griddb.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "\/";
</script>
<header id="header2">


    
    <div class="header-inner">

        <div id="collapse-button" style="display: none;">
            <span></span>
            <span></span>
            <span></span>
        </div>


        
        <div class="logo">
            <a href="/en" title="GridDB Developers"><img src="https://griddb-pro.azureedge.net/en/wp-content/themes/juliet/images/Untitled10.png" alt="GridDB Developers" style="width:auto;height:25px;">
    </a>
        </div>
        


        
        <nav id="nav" class="main-navigation" role="navigation" style="">
            <div class="menu-topnav-container">
                <ul id="menu-topnav" class="nav-menu">
                    <li id="menu-item-581" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-581"><a href="/en/docs/documents/1-1_what-is-griddb.php">Docs</a></li>
                    <li id="menu-item-681" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-681"><a href="/en/faq/">FAQ</a></li>
                    <li id="menu-item-671" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-671"><a href="/en/community/">Community</a></li>
                    <li id="menu-item-591" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-591"><a href="/en/forums/forum/top/">Forum</a></li>
                    <li id="menu-item-291" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-291"><a href="/en/blog">Blog</a></li>

                </ul>

            </div>


       <li style="list-style:none"><a href="https://griddb.net/en/downloads/"> <span class="download-button4" style="display:none"> DOWNLOAD</span></a></li>

 
            
            <a href="/en/downloads/"> <span id="download-button"> Download</span></a>
            

        </nav>
        

    </div>


</header>


    
  </head>
  <body data-url="/latest/data-modeling/4-2_data-modeling-using-griddb/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="/">Documentation for Hugo docDock</a>
  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/latest" class="dd-item">
          <a href="/latest">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/latest/introduction/" class="dd-item haschildren
        ">
      <div>
      <a href="/latest/introduction/"><b>1. </b>Introduction</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/introduction/1-1_what-is-griddb/" class="dd-item">
        <div>
          <a href="/latest/introduction/1-1_what-is-griddb/">
            What is GridDB
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/introduction/1-2_griddb-edition/" class="dd-item">
        <div>
          <a href="/latest/introduction/1-2_griddb-edition/">
            GridDB Editions
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/getting-started/" class="dd-item haschildren
        ">
      <div>
      <a href="/latest/getting-started/"><b>2. </b>Getting Started</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/getting-started/2-1_system-requirements/" class="dd-item">
        <div>
          <a href="/latest/getting-started/2-1_system-requirements/">
            System Requirements
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/getting-started/2-2_installation/" class="dd-item">
        <div>
          <a href="/latest/getting-started/2-2_installation/">
            Installation
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/getting-started/2-3_run-your-first-griddb-node-cluster/" class="dd-item">
        <div>
          <a href="/latest/getting-started/2-3_run-your-first-griddb-node-cluster/">
            Run your First GridDB Node/Cluster
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/getting-started/2-4_run-a-sample-java-client-app/" class="dd-item">
        <div>
          <a href="/latest/getting-started/2-4_run-a-sample-java-client-app/">
            Run a Sample Java Client App
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/technical-architecture-and-guide/" class="dd-item haschildren
        ">
      <div>
      <a href="/latest/technical-architecture-and-guide/"><b>3. </b>Technical Architecture and Guide</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/technical-architecture-and-guide/3-1_griddb-technical-overview/" class="dd-item">
        <div>
          <a href="/latest/technical-architecture-and-guide/3-1_griddb-technical-overview/">
            GridDB Technical Overview
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/technical-architecture-and-guide/3-2_key-container-model/" class="dd-item">
        <div>
          <a href="/latest/technical-architecture-and-guide/3-2_key-container-model/">
            Key Container Model
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/technical-architecture-and-guide/3-3_tql/" class="dd-item">
        <div>
          <a href="/latest/technical-architecture-and-guide/3-3_tql/">
            TQL
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/technical-architecture-and-guide/3-4_crud-operations/" class="dd-item">
        <div>
          <a href="/latest/technical-architecture-and-guide/3-4_crud-operations/">
            CRUD Operations
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/technical-architecture-and-guide/3-5_transactions-and-acid/" class="dd-item">
        <div>
          <a href="/latest/technical-architecture-and-guide/3-5_transactions-and-acid/">
            Transactions and ACID
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/technical-architecture-and-guide/3-6_indexes/" class="dd-item">
        <div>
          <a href="/latest/technical-architecture-and-guide/3-6_indexes/">
            Indexes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/technical-architecture-and-guide/3-7_storage-architecture/" class="dd-item">
        <div>
          <a href="/latest/technical-architecture-and-guide/3-7_storage-architecture/">
            Storage Architecture
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/technical-architecture-and-guide/3-8_replication-distribution/" class="dd-item">
        <div>
          <a href="/latest/technical-architecture-and-guide/3-8_replication-distribution/">
            Replication &amp; Distribution
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/technical-architecture-and-guide/3-9_sharding/" class="dd-item">
        <div>
          <a href="/latest/technical-architecture-and-guide/3-9_sharding/">
            Sharding
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/data-modeling/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/latest/data-modeling/"><b>4. </b>Data Modeling</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/data-modeling/4-1_data-modeling-basics/" class="dd-item">
        <div>
          <a href="/latest/data-modeling/4-1_data-modeling-basics/">
            Data Modeling Basics
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/data-modeling/4-2_data-modeling-using-griddb/" class="dd-item active">
        <div>
          <a href="/latest/data-modeling/4-2_data-modeling-using-griddb/">
            Data Modeling Using GridDB
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/data-modeling/4-3_modeling-relationships/" class="dd-item">
        <div>
          <a href="/latest/data-modeling/4-3_modeling-relationships/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/data-modeling/4-4_possibilities-and-variations-of-data-models-in-griddb/" class="dd-item">
        <div>
          <a href="/latest/data-modeling/4-4_possibilities-and-variations-of-data-models-in-griddb/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/sample-applications/" class="dd-item haschildren
        ">
      <div>
      <a href="/latest/sample-applications/"><b>5. </b>Sample Application</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/latest/sample-applications/basics/" class="dd-item haschildren
        ">
      <div>
      <a href="/latest/sample-applications/basics/"><b>5.1 </b>Basics</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/sample-applications/basics/5-1-10_collection-delete/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-10_collection-delete/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-11_collection-modify/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-11_collection-modify/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-12_timeseries-register/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-12_timeseries-register/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-13_timeseries-retrieve/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-13_timeseries-retrieve/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-14_timeseries-delete/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-14_timeseries-delete/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-15_timeseries-modify/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-15_timeseries-modify/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-16_tql/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-16_tql/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-17_trigger-rest/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-17_trigger-rest/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-18_trigger-jms/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-18_trigger-jms/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-19_multiput/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-19_multiput/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-1_introduction/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-1_introduction/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-20_multiquery/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-20_multiquery/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-21_multiget/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-21_multiget/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-2_griddb-basics/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-2_griddb-basics/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-3_prepare-server/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-3_prepare-server/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-4_prepare-client/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-4_prepare-client/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-5_connection/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-5_connection/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-6_container-schema/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-6_container-schema/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-7_container-create-drop/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-7_container-create-drop/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-8_collection-register/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-8_collection-register/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/sample-applications/basics/5-1-9_collection-retrieve/" class="dd-item">
        <div>
          <a href="/latest/sample-applications/basics/5-1-9_collection-retrieve/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/administration/" class="dd-item haschildren
        ">
      <div>
      <a href="/latest/administration/"><b>6. </b>Administration</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/administration/6-1_supported-os-platforms-and-system-requirements/" class="dd-item">
        <div>
          <a href="/latest/administration/6-1_supported-os-platforms-and-system-requirements/">
            Supported OS, Platforms and System Requirements
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/administration/6-2_sizing-and-scaling/" class="dd-item">
        <div>
          <a href="/latest/administration/6-2_sizing-and-scaling/">
            Sizing and Scaling
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/administration/6-3_installing/" class="dd-item">
        <div>
          <a href="/latest/administration/6-3_installing/">
            Installing
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/administration/6-4_upgrading-the-editions/" class="dd-item">
        <div>
          <a href="/latest/administration/6-4_upgrading-the-editions/">
            Upgrading Editions
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/administration/6-5_migration-from-other-databases/" class="dd-item">
        <div>
          <a href="/latest/administration/6-5_migration-from-other-databases/">
            Migration from Other Databases
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/administration/6-6_cluster-administration-operations/" class="dd-item">
        <div>
          <a href="/latest/administration/6-6_cluster-administration-operations/">
            Cluster Administration &amp; Operations
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/administration/6-7_monitoring-troubleshooting/" class="dd-item">
        <div>
          <a href="/latest/administration/6-7_monitoring-troubleshooting/">
            Monitoring &amp; Troubleshooting
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/administration/6-8_tuning/" class="dd-item">
        <div>
          <a href="/latest/administration/6-8_tuning/">
            Tuning
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/drivers-and-integrators/" class="dd-item haschildren
        ">
      <div>
      <a href="/latest/drivers-and-integrators/"><b>7. </b>Drivers &amp; Integrators</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/drivers-and-integrators/7-1_jdbc-connector/" class="dd-item">
        <div>
          <a href="/latest/drivers-and-integrators/7-1_jdbc-connector/">
            JDBC Connector
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/drivers-and-integrators/7-2_odbc-connector/" class="dd-item">
        <div>
          <a href="/latest/drivers-and-integrators/7-2_odbc-connector/">
            ODBC Connector
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/drivers-and-integrators/7-3_hadoop-and-spark-connector/" class="dd-item">
        <div>
          <a href="/latest/drivers-and-integrators/7-3_hadoop-and-spark-connector/">
            Hadoop and Spark Connector
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/latest/drivers-and-integrators/7-4_grafana-connector/" class="dd-item">
        <div>
          <a href="/latest/drivers-and-integrators/7-4_grafana-connector/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>




    </ul>
<select id="select-language" onchange="location = this.value;">
	
	
	
	  
	  
	    
	      
	        <option id="latest" value="/latest/data-modeling/4-2_data-modeling-using-griddb/" selected>Latest</option>
	      
	    
	  
	    
	  
	
</select>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/latest/introduction/" >
   Introduction</option>
    <option value="/latest/getting-started/" >
   Getting Started</option>
    <option value="/latest/technical-architecture-and-guide/" >
   Technical Architecture and Guide</option>
    <option value="/latest/data-modeling/" >
   Data Modeling</option> 
      <option value="/latest/data-modeling/4-1_data-modeling-basics/" >- Data Modeling Basics</option>
      <option value="/latest/data-modeling/4-2_data-modeling-using-griddb/"  selected>- Data Modeling Using GridDB</option>
      <option value="/latest/data-modeling/4-3_modeling-relationships/" >- </option>
      <option value="/latest/data-modeling/4-4_possibilities-and-variations-of-data-models-in-griddb/" >- </option>
  
    <option value="/latest/sample-applications/" >
   Sample Application</option>
    <option value="/latest/administration/" >
   Administration</option>
    <option value="/latest/drivers-and-integrators/" >
   Drivers &amp; Integrators</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "\/\/latest";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>Data Modeling Using GridDB</h1>
    
    
    
    

<p>Storing Data in Collection</p>

<p>The flow of storing data in a Collection is shown below. First, if there is no Collection to store data in, create a new Collection following the procedure below:</p>

<ol>
<li>Get a GridStore instance.</li>
<li>Create a Collection.</li>
</ol>

<p>You can store data in an existing Collection with the following procedure:</p>

<ol>
<li>Get a GridStore instance.</li>
<li>Get a collection.</li>
<li>Set operation parameters</li>
<li>Create indexes.</li>
<li>Create values to be stored.</li>
<li>Store values in the Collection</li>
<li>Perform a commit a proper intervals</li>
<li>Release the GridStore instance.</li>
</ol>

<p>Storing data in a TimeSeries container follows the exact same procedure.</p>

<p>This examples below are intended to provide an application which has the following capabilities:</p>

<ul>
<li>Storing facility information</li>
<li>Storing alarm history</li>
<li>Storing sensor data</li>
<li>Searching for and displaying facility information and sensor data showing abnormality</li>
</ul>

<p>The following sections describe client programs which implement each capability based on the schema definitions shown in the previous chapter.</p>

<h3 id="4-2-1-storing-facility-information">4.2.1 Storing Facility Information</h3>

<p>Technically, in the monitoring system, the information on facility configuration and specifications needs to be stored in a database. For simplicity, however, this section shows a sample program which loads facility information collectively from a CSV file storing the data. An outline of the processing flow is shown below.</p>

<ol>
<li>Connect to a server and get a GridStore instance.</li>
<li>Create a facility information Collection name with a specified name (&ldquo;equipment_col&rdquo;) in GridStore.</li>
<li>Create indexes to be used for search.</li>
<li>Store a value repeatedly while reading a CSV file, as follows:

<ul>
<li>4-1. Analyze a read CSV-formatted line and create a facility information object to store.</li>
<li>4-2. Store (put) the created facility information object in the facility information Collection.</li>
<li>4-3. Perform a commit if repeated the predetermined number of times.</li>
</ul></li>
<li>Release the GridStore instance if all CSV-formatted lines are processed.</li>
</ol>

<p>A concrete sample program is shown below:</p>

<p>1:  package pvrms;
  2:<br />
  3:  import java.io.FileReader;
  4:  import java.io.IOException;
  5:  import java.text.ParseException;
  6:  import java.util.Properties;
  7:<br />
  8:  import au.com.bytecode.opencsv.CSVReader;
  9:<br />
 10:  import com.toshiba.mwcloud.gs.Collection;
 11:  import com.toshiba.mwcloud.gs.GSException;
 12:  import com.toshiba.mwcloud.gs.GridStore;
 13:  import com.toshiba.mwcloud.gs.GridStoreFactory;
 14:  import com.toshiba.mwcloud.gs.RowKey;
 15:<br />
 16:  // Facility information
 17:  class Equip {
 18:      @RowKey String id;
 19:      String   name;
 20:      //Blob     spec; // For simplicity, spec information is not used.
 21:  }
 22:<br />
 23:  public class SimplePv0 {
 24:<br />
 25:      /*
 26:       * Load facility information from a CSV file.
 27:       <em>/
 28:      public static void main(String[] args) throws GSException, ParseException, IOException {
 29:<br />
 30:          // Specify a server.
 31:          final String gsServer     = &ldquo;127.0.0.1&rdquo;;
 32:          final String gsPort       = &ldquo;10001&rdquo;;
 33:          final String user         = &ldquo;admin&rdquo;;
 34:          final String password     = &ldquo;admin&rdquo;;
 35:<br />
 36:          final String equipColName = &ldquo;equipment_col&rdquo;;
 37:<br />
 38:          // Get a GridStore instance.
 39:          final Properties prop = new Properties();
 40:          prop.setProperty(&ldquo;host&rdquo;, gsServer);
 41:          prop.setProperty(&ldquo;port&rdquo;, gsPort);
 42:          prop.setProperty(&ldquo;user&rdquo;, user);
 43:          prop.setProperty(&ldquo;password&rdquo;, password);
 44:          final GridStore store = GridStoreFactory.getInstance().getGridStore(prop);
 45:<br />
 46:<br />
 47:          // Read a CSV file.
 48:          String dataFileName = &ldquo;equipName.csv&rdquo;;
 49:          CSVReader reader = new CSVReader(new FileReader(dataFileName));
 50:          String[] nextLine;
 51:<br />
 52:          /</em>
 53:           *  Create a Collection.
 54:           <em>/
 55:          Collection equipCol = store.putCollection(equipColName, Equip.class);
 56:<br />
 57:          /</em>
 58:           *  Create indexes for Columns.
 59:           <em>/
 60:          equipCol.createIndex(&ldquo;id&rdquo;);
 61:          equipCol.createIndex(&ldquo;name&rdquo;);
 62:<br />
 63:          /</em>
 64:           *  Set autocommit mde to OFF.
 65:           <em>/
 66:          equipCol.setAutoCommit(false);
 67:<br />
 68:          // Commit interval
 69:          Long commtInterval = (long) 1;
 70:<br />
 71:          /</em>
 72:           *  Store a value.
 73:           */
 74:          Equip equip = new Equip();
 75:          Long cnt = (long) 0;
 76:          byte[] b = new byte[1];
 77:          b[0] = 1;
 78:          while ((nextLine = reader.readNext()) != null) {
 79:<br />
 80:              // Store facility information.
 81:              equip.id   = nextLine[2];
 82:              equip.name   = nextLine[3];
 83:<br />
 84:              equipCol.put(equip);
 85:<br />
 86:              cnt++;
 87:<br />
 88:              if(0 == cnt%commtInterval) {
 89:                  // Commit a transaction.
 90:                  equipCol.commit();
 91:              }
 92:<br />
 93:          }
 94:<br />
 95:          // Release a resource
 96:          store.close();
 97:          reader.close();
 98:<br />
 99:  }
100:<br />
101:  }</p>

<h3 id="4-2-2-storing-alarm-history">4.2.2 Storing Alarm History</h3>

<p>Technically, in the monitoring system, a sensor or a facility directly sends an alarm to GridDB and stores it . For simplicity&rsquo;s sake, however, this section shows a sample program which loads alarm history data collectively from a CSV file storing the data. An outline of the processing flow is shown below.</p>

<ol>
<li>Connect to a server and get a GridStore instance.</li>
<li>Create an alert Collection with a specified name (&ldquo;alert_col&rdquo;) in GridStore and get it.</li>
<li>Create indexes to be used for search.</li>
<li>Store a value repeatedly while reading a CSV file, as follows:

<ul>
<li>4-1. Analyze a read CSV-formatted line and create an alert object to store.</li>
<li>4-2. Store (put) the created alert object in the alert Collection.</li>
<li>4-3. Perform a commit if repeated the predetermined number of times.</li>
</ul></li>
<li>Release the GridStore instance if all CSV-formatted lines are processed.</li>
</ol>

<p>A concrete sample program is shown below:</p>

<p>1:  package pvrms;
  2:<br />
  3:  import java.io.FileReader;
  4:  import java.io.IOException;
  5:  import java.text.ParseException;
  6:  import java.text.SimpleDateFormat;
  7:  import java.util.Date;
  8:  import java.util.Properties;
  9:<br />
 10:  import au.com.bytecode.opencsv.CSVReader;
 11:<br />
 12:  import com.toshiba.mwcloud.gs.Collection;
 13:  import com.toshiba.mwcloud.gs.GSException;
 14:  import com.toshiba.mwcloud.gs.GridStore;
 15:  import com.toshiba.mwcloud.gs.GridStoreFactory;
 16:  import com.toshiba.mwcloud.gs.RowKey;
 17:<br />
 18:  // Alert information
 19:  class Alert {
 20:      @RowKey Long id;
 21:      Date    timestamp;
 22:      String  sensorId;
 23:      int     level;
 24:      String  detail;
 25:  }
 26:<br />
 27:  public class SimplePv1 {
 28:<br />
 29:      /*
 30:       * Load alert data from a CSV file.
 31:       <em>/
 32:      public static void main(String[] args) throws GSException, ParseException, IOException {
 33:<br />
 34:          // Specify a server.
 35:          final String gsServer     = &ldquo;127.0.0.1&rdquo;;
 36:          final String gsPort       = &ldquo;10001&rdquo;;
 37:          final String user         = &ldquo;admin&rdquo;;
 38:          final String password     = &ldquo;admin&rdquo;;
 39:<br />
 40:          final String alertColName = &ldquo;alert_col&rdquo;;
 41:<br />
 42:          // Get a GridStore instance.
 43:          final Properties prop = new Properties();
 44:          prop.setProperty(&ldquo;host&rdquo;, gsServer);
 45:          prop.setProperty(&ldquo;port&rdquo;, gsPort);
 46:          prop.setProperty(&ldquo;user&rdquo;, user);
 47:          prop.setProperty(&ldquo;password&rdquo;, password);
 48:          final GridStore store = GridStoreFactory.getInstance().getGridStore(prop);
 49:<br />
 50:          // Read a CSV file.
 51:          String dataFileName = &ldquo;alarmHistory.csv&rdquo;;
 52:          CSVReader reader = new CSVReader(new FileReader(dataFileName));
 53:          String[] nextLine;
 54:<br />
 55:          /</em>
 56:           *  Create a Collection.
 57:           <em>/
 58:          Collection alertCol = store.putCollection(alertColName, Alert.class);
 59:<br />
 60:          /</em>
 61:           *  Create indexes for Columns.
 62:           <em>/
 63:          alertCol.createIndex(&ldquo;timestamp&rdquo;);
 64:          alertCol.createIndex(&ldquo;level&rdquo;);
 65:<br />
 66:          /</em>
 67:           *  Set autocommit mde to OFF.
 68:           <em>/
 69:          alertCol.setAutoCommit(false);
 70:<br />
 71:          // Commit interval
 72:          Long commtInterval = (long) 1;
 73:<br />
 74:          /</em>
 75:           *  Store a value.
 76:           */
 77:          SimpleDateFormat format = new SimpleDateFormat(&ldquo;yyyy/MM/ddHH:mm:ss&rdquo;);
 78:          Alert alert = new Alert();
 79:          Long cnt = (long) 0;
 80:          while ((nextLine = reader.readNext()) != null) {
 81:<br />
 82:              String dateS     = nextLine[0];//2011/1/1
 83:              String timeS     = nextLine[1];//19 (hundred hours)
 84:              String datetimeS = dateS + &ldquo; &rdquo; + timeS + &ldquo;:00:00&rdquo;;
 85:              Date   date      = format.parse(datetimeS);
 86:              Long   datetime  = date.getTime();
 87:<br />
 88:              alert.id         = ++cnt;
 89:              alert.timestamp  = new Date(datetime);
 90:              alert.sensorId   = nextLine[2];
 91:              alert.level      = Integer.valueOf(nextLine[3]);
 92:              alert.detail     = nextLine[4];
 93:<br />
 94:              alertCol.put(alert);
 95:<br />
 96:              if(0 == cnt%commtInterval) {
 97:                  // Commit a transaction.
 98:                  alertCol.commit();
 99:              }
100:<br />
101:          }
102:<br />
103:          // Release a resource.
104:          store.close();
105:          reader.close();
106:<br />
107:  }
108:<br />
109:  }</p>

<h3 id="4-2-3-storing-sensor-data">4.2.3 Storing Sensor Data</h3>

<p>Technically, in the monitoring system, a sensor directly sends a measured value to be stored in GridStore. For simplicity, however, this section shows a sample program which loads sensor data collectively from a CSV file storing the data. An outline of a processing flow is shown below.</p>

<ol>
<li>Connect to a server and get a GridStore instance.</li>
<li>Read the first line of a CSV file and create a set of TimeSeries to be used beforehand, as follows:

<ul>
<li>2-1. Analyze the first CSV-formatted line and obtain multiple sensor IDs (= the names of TimeSeries to be created).</li>
<li>2-2. Create an alert Collection in GridStore for each obtained sensor ID.</li>
</ul></li>
<li>Store a value repeatedly, while reading the rest of the CSV file, as follows:

<ul>
<li>3-1. Analyze a read CSV-formatted file and create a Point object to store.</li>
<li>3-2. Store (put) the created Point object in an appropriate TimeSeries.</li>
</ul></li>
<li>Release the GridStore instance if all CSV-formatted lines are processed.</li>
</ol>

<p>A concrete sample program is shown below:</p>

<p>1:  package pvrms;
 2:<br />
 3:  import java.io.FileReader;
 4:  import java.io.IOException;
 5:  import java.text.ParseException;
 6:  import java.text.SimpleDateFormat;
 7:  import java.util.Date;
 8:  import java.util.Properties;
 9:<br />
10:  import au.com.bytecode.opencsv.CSVReader;
11:<br />
12:  import com.toshiba.mwcloud.gs.GridStore;
13:  import com.toshiba.mwcloud.gs.GridStoreFactory;
14:  import com.toshiba.mwcloud.gs.RowKey;
15:  import com.toshiba.mwcloud.gs.TimeSeries;
16:<br />
17:  // Sensor data
18:  class Point {
19:      @RowKey Date time;
20:      double  value;
21:      String  status;
22:  }
23:<br />
24:  public class SimplePv2 {
25:<br />
26:      /*
27:       * Load time-series data form a CSV file.
28:       <em>/
29:      public static void main(String[] args) throws ParseException, IOException {
30:<br />
31:          // Specify a server.
32:          final String gsServer     = &ldquo;127.0.0.1&rdquo;;
33:          final String gsPort       = &ldquo;10001&rdquo;;
34:          final String user         = &ldquo;admin&rdquo;;
35:          final String password     = &ldquo;admin&rdquo;;
36:<br />
37:          // Get a GridStore instance.
38:          final Properties prop = new Properties();
39:          prop.setProperty(&ldquo;host&rdquo;, gsServer);
40:          prop.setProperty(&ldquo;port&rdquo;, gsPort);
41:          prop.setProperty(&ldquo;user&rdquo;, user);
42:          prop.setProperty(&ldquo;password&rdquo;, password);
43:          final GridStore store = GridStoreFactory.getInstance().getGridStore(prop);
44:<br />
45:          // Read a CSV file.
46:          String dataFileName = &ldquo;sensorHistory.csv&rdquo;;
47:          CSVReader reader = new CSVReader(new FileReader(dataFileName));
48:          String[] nextLine;
49:          nextLine = reader.readNext();
50:<br />
51:<br />
52:          // Presupposing that the 1st line contains sensor IDs and the rest of lines contain data.
53:          // Presupposing that 0:date, 1:time, &hellip;
54:<br />
55:<br />
56:          /</em>
57:           *  Read a sensor ID and create a TimeSeries.
58:           <em>/
59:          String[] tsNameArray = new String[nextLine.length];
60:          for(int j = 2; j &lt; nextLine.length; j++) {
61:<br />
62:              tsNameArray[j] = nextLine[j];
63:              store.putTimeSeries(tsNameArray[j], Point.class);
64:<br />
65:          }
66:<br />
67:          /</em>
68:           *  Store a value in each TimeSeries.
69:           */
70:          SimpleDateFormat format = new SimpleDateFormat(&ldquo;yyyy/MM/ddHH:mm:ss&rdquo;);
71:          Point point             = new Point();
72:          while ((nextLine = reader.readNext()) != null) {
73:<br />
74:              String dateS     = nextLine[0];//2011/1/1
75:              String timeS     = nextLine[1];//19 (hundred hours)
76:              String datetimeS = dateS + &ldquo; &rdquo; + timeS + &ldquo;:00:00&rdquo;;
77:              Date   date      = format.parse(datetimeS);
78:              Long   datetime  = date.getTime();
79:<br />
80:              for(int i = 2, j = 2; j &lt; nextLine.length; i++, j+=2) {
81:<br />
82:                  TimeSeries ts = store.getTimeSeries(tsNameArray[i], Point.class);
83:<br />
84:                  point.time   = new Date(datetime);
85:                  point.value  = Double.valueOf(nextLine[j]);
86:                  point.status = nextLine[j+1];
87:<br />
88:                  ts.append(point);
89:              }
90:          }
91:<br />
92:          // Release a resource.
93:          store.close();
94:          reader.close();
95:<br />
96:  }
97:<br />
98:  }</p>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/latest/data-modeling/4-1_data-modeling-basics/" title="Data Modeling Basics"> <i class="fa fa-chevron-left"></i><label>Data Modeling Basics</label></a>
    <a class="nav nav-next" href="/latest/data-modeling/4-3_modeling-relationships/" title="" style="margin-right: 0px;"><label></label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

    <div class="github-link">
      <a href="https://github.com/vjeantet/hugo-theme-docdock/edit/master/exampleSite/content/data%20modeling/4-2_data-modeling-using-griddb.md" target="blank"><i class="fa fa-code-fork"></i>
        </a>
    </div>
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>
<script src="/js/newitemstoggle.js"></script>



<script src="/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>